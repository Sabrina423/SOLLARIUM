<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatório de Serviço</title>
    <link rel="stylesheet" href="css/relatoriomobile.css">
</head>
<body>
    <header>
        <div class="logo">
            <img src="imagens/LOGO_SOLLARIUM (8).png">
        </div>
        <nav class="menu">
            <ul>
                <li><a href="#" class="back-profile">Voltar ao Perfil</a></li>
                <li><a href="#" class="back-profile">Minha área</a></li>
                <li class="menu-toggle">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </li>
            </ul>
        </nav>
    </header>
    
    <main>
        <section class="service-details">
            <h1>Detalhes do Serviço</h1>
            <p><strong>Nome do Cliente:</strong> <span id="client-name">João da Silva</span></p>
            <p><strong>Valor do Serviço:</strong> R$ 500,00</p>
            <p><strong>Data e Horário:</strong> 09/09/2024 14:30</p>
            <p><strong>Endereço do Serviço:</strong> Rua Exemplo, 123, Bairro, Cidade</p>
            
            <p><strong>Escolha uma opção:</strong></p>
            <button onclick="document.getElementById('photoInput').click()">Carregar Foto</button>
            <br>
            <button onclick="startCamera()">Tirar Foto</button>
            <br>
            <input type="file" id="photoInput" accept="image/*" class="hidden" onchange="previewImage(event)">
            <video id="video" class="hidden" autoplay></video>
            <button id="captureButton" class="button hidden" onclick="capturePhoto()">Capturar Foto</button>
            <canvas id="canvas"></canvas>
            <img id="photoPreview" class="hidden">
            <br>
            <button id="submitButton" class="button" onclick="submitPhoto()">Enviar Foto</button>
        </div>    
        </section>
    </main>

    <script>
     let stream = null;

function startCamera() {
    const video = document.getElementById('video');
    const captureButton = document.getElementById('captureButton');

    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia({ video: true })
        .then(function(mediaStream) {
            stream = mediaStream;
            video.srcObject = mediaStream;
            video.classList.remove('hidden');
            captureButton.classList.remove('hidden');
        }).catch(function(error) {
            console.error('Erro ao acessar a câmera:', error);
        });
    } else {
        alert('Acesso à câmera não suportado.');
    }
}

function capturePhoto() {
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const photoPreview = document.getElementById('photoPreview');

    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    const context = canvas.getContext('2d');
    context.drawImage(video, 0, 0, canvas.width, canvas.height);

    photoPreview.src = canvas.toDataURL('image/png');
    photoPreview.classList.remove('hidden');

    // Stop the video stream and hide the video element
    if (stream) {
        stream.getTracks().forEach(track => track.stop());
    }
    video.classList.add('hidden');
    canvas.classList.add('hidden');
    document.getElementById('captureButton').classList.add('hidden');
}

function previewImage(event) {
    const photoPreview = document.getElementById('photoPreview');
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            photoPreview.src = e.target.result;
            photoPreview.classList.remove('hidden');
        }
        reader.readAsDataURL(file);
    }
}

function submitPhoto() {
    const photoPreview = document.getElementById('photoPreview');
    if (photoPreview.src) {
        alert('Foto enviada com sucesso!');
        // Aqui você pode adicionar o código para enviar a foto para um servidor
    } else {
        alert('Nenhuma foto selecionada.');
    }
}
document.addEventListener('DOMContentLoaded', function () {
        const uploadBtn = document.getElementById('upload-btn');
        const uploadSection = document.getElementById('upload-section');
        const menuToggle = document.querySelector('.menu-toggle');
        const menu = document.querySelector('nav.menu');
    
        uploadBtn.addEventListener('click', function () {
            uploadSection.classList.toggle('hidden');
        });
    
        document.getElementById('invoice-upload').addEventListener('change', function (e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (event) {
                    const preview = document.getElementById('preview');
                    preview.src = event.target.result;
                    preview.classList.remove('hidden');
                }
                reader.readAsDataURL(file);
            }
        });
    
        menuToggle.addEventListener('click', function () {
            menu.classList.toggle('active');
        });
    });
    </script>
</body>
</html>

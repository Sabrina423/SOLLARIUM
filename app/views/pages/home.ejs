<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" 
    integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" 
    crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Sollarium</title>
    <script src="/js/home.js"></script>
    <link rel="stylesheet" href="/css/home.css">
    <script src="https://sdk.mercadopago.com/js/V2"></script>
</head>

<body>
    <header>
        <nav class="navbar">
            <nav class="logo"><a href="#">Sollarium</a></nav>
            <ul class="links">
                <li><a href="/">Início</a></li>
                <li><a href="/orcamento">Orçamento</a></li>
                <li><a href="/sobre">Sobre nós</a></li>
                <% if (!autenticado.autenticado) { %>
                    <li><a href="/cadastroinicial" id="cadastre-se">Cadastre-se</a></li>
                <% } %>
                

            </ul>
            <% if (autenticado.autenticado != null) { 
                let arquivo = { "imagem": "imagens/perfil/imgperfil.png" }; 
            %>
            <nav class="profile-container">
                <span>Olá <%= autenticado.autenticado %>!</span>
                <a href="<%= autenticado.tipo === 'prof' ? '/perfilprof' : '/perfilcliente' %>">
                    <img src="<%= arquivo.imagem %>" alt="Imagem de perfil" style="max-width: 60px; max-height: 60px;" 
                         onerror="this.onerror=null; this.src='imagens/perfil/imgperfil.png';">
                </a>
                <p><a href="#" id="logout">sair</a></p>

            </nav>
            
            <% } else { %>
                <a href="/entrar" class="action_btn">Entrar</a>
            <% } %>   
            <nav class="toggle_btn">
                <i class="fa-solid fa-bars-staggered"></i>
            </nav>
        </nav>
    
        <nav class="dropdown_menu">
            <li><a href="/home">Início</a></li>
            <li><a href="/orcamento">Orçamento</a></li>
            <li><a href="/sobre">Sobre nós</a></li>
            <% if (autenticado.autenticado != null) { 
                let arquivo = { "imagem": "imagens/perfil/imgperfil.png" }; 
            %>
                <nav class="profile-container" style="margin: 10px 0; display: flex; flex-direction: column; align-items: center;">
                    <span>Olá <%= autenticado.autenticado %>!</span>
                    <a href="<%= autenticado.tipo === 'prof' ? '/perfilprof' : '/perfilcliente' %>">
                        <img src="<%= arquivo.imagem %>" alt="Imagem de perfil" style="max-width: 60px; max-height: 60px;" 
                             onerror="this.onerror=null; this.src='imagens/perfil/imgperfil.png';">
                    </a>
                    <p><a href="/">sair</a></p>
                </nav>                
            <% } else { %>
                <a href="/entrar" class="action_btn">Entrar</a>
            <% } %>   
        </nav>
    </header>    
    
    <main>
        <nav class="sliderhome">
            <nav class="listhome">
                <nav class="item active">
                    <img src="imagens/home1.jpg">
                    <nav class="content">
                        <p>serviço</p>
                        <h2>Instalação</h2>
                        <p class="pp">
                            Oferecemos instalação completa de sistemas de energia solar, 
                            desde o planejamento até a ativação, garantindo eficiência e segurança em cada etapa.
                        </p>
                    </nav>
                </nav>
                <nav class="item">
                    <img src="imagens/1.png">
                    <nav class="content">
                        <p>serviço</p>
                        <h2>Vistoria</h2>
                        <p class="pp">
                            Realizamos vistorias detalhadas para avaliar a viabilidade e o estado dos sistemas solares,
                            identificando possíveis melhorias e garantindo seu funcionamento ideal.
                        </p>
                    </nav>
                </nav>
                <nav class="item">
                    <img src="imagens/2.png">
                    <nav class="content">
                        <p>serviço</p>
                        <h2>Manutenção</h2>
                        <p class="pp">
                            Nosso serviço de manutenção preventiva e corretiva assegura que seu sistema solar opere
                            com máxima eficiência e longevidade, minimizando interrupções.
                        </p>
                    </nav>
                </nav>
                <nav class="item">
                    <img src="imagens/3.png">
                    <nav class="content">
                        <p>serviço</p>
                        <h2>Consultoria</h2>
                        <p class="pp">
                            Fornecemos consultoria especializada para ajudá-lo a escolher e implementar a melhor
                            solução de energia solar, adaptada às suas necessidades específicas e orçamento.
                        </p>
                    </nav>
                </nav>
                <nav class="item">
                    <img src="imagens/4.png">
                    <nav class="content">
                        <p>serviço</p>
                        <h2>Limpeza</h2>
                        <p class="pp">
                            Oferecemos serviços de limpeza profissional para painéis solares, removendo sujeira e
                            detritos que podem reduzir a eficiência do sistema, garantindo desempenho ótimo.
                        </p>
                    </nav>
                </nav>
            </nav>
            
            <nav class="thumbnailhome">
                <nav class="item active">
                    <img src="imagens/insalacao.png">
                    <nav class="content">
                        Instalação
                    </nav>
                </nav>
                <nav class="item">
                    <img src="imagens/vistoria.png">
                    <nav class="content">
                        Vistoria
                    </nav>
                </nav>
                <nav class="item">
                    <img src="imagens/manutencao.png">
                    <nav class="content">
                        Manutenção
                    </nav>
                </nav>
                <nav class="item">
                    <img src="imagens/consultoria.png">
                    <nav class="content">
                        Consultoria
                    </nav>
                </nav>
                <nav class="item">
                    <img src="imagens/limpeza.png">
                    <nav class="content">
                        Limpeza
                    </nav>
                </nav>
            </nav>
        </nav>
    </main>
    <footer>
        <section class="footer">
            <nav class="footer-content">
                <h2>Sollarium</h2>
                <p>Sua plataforma de serviços solares em suas mãos.</p>
                <nav class="icons">
                    <a href=""><i class='bx bxl-facebook-circle'></i></a>
                    <a href=""><i class='bx bxl-twitter'></i></a>
                    <a href=""><i class='bx bxl-instagram-alt'></i></a>
                    <a href=""><i class='bx bxl-youtube'></i></a>
                </nav>
            </nav>
            
            <nav class="footer-content">
                <h4>Serviços</h4>
                <li><a href="/orcamento">Instalação</a></li>
                <li><a href="/orcamento">Vistoria</a></li>
                <li><a href="/orcamento">Manutenção</a></li>
                <li><a href="/orcamento">Consultoria</a></li>
                <li><a href="/orcamento">Limpeza</a></li>
            </nav>

            <nav class="footer-content">
                <h4>Menu</h4>
                <li><a href="/orcamento">Orçamento</a></li>
                <li><a href="/sobre">Sobre Nós</a></li>
                <li><a href="/">Início</a></li>
                <li><a href="/orcamento">Consultoria</a></li>
            </nav>

            <nav class="footer-content">
                <h4>Ajuda</h4>
                <li><a href="">Contato email</a></li>
                <li><a href="">Contato telefone</a></li>
            </nav>
        </section>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const mensagemSucesso = localStorage.getItem('cadastroSucesso');
        if (mensagemSucesso) {
            alert(mensagemSucesso); // Ou use outro método para exibir a mensagem
            localStorage.removeItem('cadastroSucesso'); // Limpar a mensagem após exibir
        }

        document.getElementById('logout').addEventListener('click', function(event) {
    event.preventDefault(); // Evita o comportamento padrão do link

    // Realiza uma requisição para o endpoint de logout
    fetch('/logout', { method: 'POST' })
        .then(response => {
            if (response.ok) {
                // Redireciona para a página inicial ou de login
                window.location.href = '/';
            } else {
                // Trate o erro de logout (opcional)
                alert('Erro ao fazer logout. Tente novamente.');
            }
        })
        .catch(error => {
            console.error('Erro ao fazer logout:', error);
            alert('Erro ao fazer logout. Tente novamente.');
        });
});

       function login() {
    // Código de autenticação...

    // Após o login, ocultar o botão "Cadastre-se"
    const cadastroButton = document.getElementById('cadastre-se');
    if (cadastroButton) {
        cadastroButton.style.display = 'none'; // Esconde o botão
    }

    // Mostrar o profile-container, se necessário
    const profileContainer = document.querySelector('.profile-container');
    if (profileContainer) {
        profileContainer.style.display = 'flex'; // Exibe o perfil
    }
}

        const toggleBtn = document.querySelector('.toggle_btn');
        const toggleBtnIcon = document.querySelector('.toggle_btn i');
        const dropDownMenu = document.querySelector('.dropdown_menu');

        toggleBtn.onclick = function () {
            dropDownMenu.classList.toggle('open');
            const isOpen = dropDownMenu.classList.contains('open');

            toggleBtnIcon.classList = isOpen
                ? 'fa-solid fa-xmark'
                : 'fa-solid fa-bars-staggered';
        }
        // Supondo que você tenha um evento de login
function login() {
    // Código de autenticação...

    // Após o login, ocultar o botão "Cadastre-se"
    const cadastroButton = document.getElementById('cadastre-se'); // ajuste o ID conforme necessário
    if (cadastroButton) {
        cadastroButton.style.display = 'none';
    }

    // Mostrar o profile-container, se necessário
    const profileContainer = document.querySelector('.profile-container');
    if (profileContainer) {
        profileContainer.style.display = 'flex';
    }
    
}
    });
// Exemplo de uso: chamar a função login quando o usuário se autenticar com sucesso

    </script>
    <script src="app.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="/css/perfilprof.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">
    <title>Perfil do Profissional</title>
</head>
<body>
    <form action="/perfilprof" method="post" enctype="multipart/form-data">
        <section class="perfil-container">
            <!-- SEÇÃO ESQUERDA -->
            <section class="perfil-left">
                <section class="perfil-header">
                    <!-- Imagem do Perfil -->
                    <img id="profile-pic" src="/imagens/imgperfil.png" alt="Foto do Perfil">
                    
                    <!-- Nome do Profissional -->
                    <h1 id="user-name"><%= valores.nome_prof %></h1>

                    <!-- Botão Editar Foto -->
                    <button type="button" id="edit-photo-button" onclick="togglePhotoMenu()" class="edit-photo-button">
                        Editar Foto
                    </button>
                    
                    <!-- Navegação do Perfil -->
                    <nav class="perfil-nav">
                        <ul>
                            <li>
                                <a href="/adm">
                                    <span class="material-icons-sharp">insights</span>
                                    <h3>Análises</h3>
                                </a>
                            </li>
                            <li>
                                <a href="/orcamento">
                                    <span class="material-icons-sharp">add</span>
                                    Criar novo orçamento
                                </a>
                            </li>
                            <li>
                                <a href="#" class="logout-link">
                                    <span class="material-icons-sharp">logout</span>
                                    <h3>Desconectar</h3>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </section>

                <!-- Menu de edição de foto -->
                <div id="photo-menu" class="photo-menu" style="display: none;">
                    <button type="button" onclick="togglePhotoMenu(event)">×</button>
                    <input type="file" id="file-input" accept="image/*" style="display: none;">
                    <button type="button" onclick="document.getElementById('file-input').click()">Alterar Foto</button>
                    <button type="button" onclick="removePhoto()">Excluir Foto</button>
                </div>
            </section>

            <!-- SEÇÃO DIREITA -->
            <section class="perfil-right">
                <nav class="perfil-detalhes">
                    <h2>Informações do Perfil</h2>
                    
                    <!-- Campos do Formulário -->
                    <div class="form-group">
                        <label for="full-name">Nome Completo</label>
                        <input type="text" id="full-name" name="nome" value="<%= valores.nome %>" placeholder="Nome Completo">
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" value="<%= valores.email %>" placeholder="Email">
                    </div>
                    <div class="form-group">
                        <label for="cep">CEP</label>
                        <input type="text" id="cep" name="cep" value="<%= valores.cep %>" placeholder="CEP">
                    </div>
                    <div class="form-group">
                        <label for="numero">Número da Residência</label>
                        <input type="text" id="numero" name="numero" value="<%= valores.numero %>" placeholder="Número da Residência">
                    </div>
                    <div class="form-group">
                        <label for="complemento">Complemento</label>
                        <input type="text" id="complemento" name="complemento" value="<%= valores.complemento %>" placeholder="Complemento">
                    </div>
                    <div class="form-group">
                        <label for="phone">Telefone</label>
                        <input type="tel" id="phone" name="contato" value="<%= valores.fone %>" placeholder="Telefone" maxlength="15" oninput="validatePhone(this.value)">
                        <span id="phone-error" style="color: red; display: none;">Número inválido</span>
                        <span id="phone-success" style="color: green; display: none;">Telefone válido</span>
                    </div>
                    
                    <!-- Botão de Salvar -->
                    <button type="submit" class="save-button">Salvar</button>
                </nav>
            </section>
        </section>
    </form>

    <!-- JavaScript -->
    <script>
        // Função para abrir/fechar o menu de foto
        function togglePhotoMenu(event) {
            const menu = document.getElementById('photo-menu');
            menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
            event?.stopPropagation();
        }

        // Função para remover foto
        function removePhoto() {
            const profilePic = document.getElementById('profile-pic');
            profilePic.src = '/images/default-profile.jpg'; // Caminho da imagem padrão
        }

        // Validação de telefone
        function validatePhone(phone) {
            const error = document.getElementById('phone-error');
            const success = document.getElementById('phone-success');
            const regex = /^\(\d{2}\)\s\d{4,5}-\d{4}$/; // Formato (XX) XXXXX-XXXX
            if (regex.test(phone)) {
                success.style.display = 'block';
                error.style.display = 'none';
            } else {
                error.style.display = 'block';
                success.style.display = 'none';
            }
        }
    </script>
</body>
</html>
